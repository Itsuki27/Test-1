<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="//cdn.datatables.net/2.1.8/css/dataTables.dataTables.min.css" rel="stylesheet" />
    <link href="//cdn.datatables.net/2.1.8/js/dataTables.min.js" rel="stylesheet" />
    <link href="~/Resources/Sidebar.css" rel="stylesheet" />
    <script src="~/Resources/Sidebar.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=home" />
    <title>@ViewBag.Title - CRUD Application</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>

<body style="background-color: whitesmoke">

    @if (Session["UserId"] != null)
    {
        <nav id="sidebar">
            <ul>
                <li>
                    <span class="logo gap-0">
                        <img alt="Icon" src="@Url.Content("~/Resources/imgLaptop.png")" class="img-fluid m-0" style="height: 30px" />
                        @Html.ActionLink("CRUD APP", "Index", "Home", new { area = "" }, new { @class = "navbar-brand font-monospace fw-bold m-0" })
                    </span>
                    <button onclick="toggleSideBar()" id="toggle-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z" /></svg>
                    </button>
                </li>
                <li class="active">
                    <a href="#" class="text-decoration-none nav-link text-light">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z" /></svg>
                        <span>DASHBOARD</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M560-564v-68q33-14 67.5-21t72.5-7q26 0 51 4t49 10v64q-24-9-48.5-13.5T700-600q-38 0-73 9.5T560-564Zm0 220v-68q33-14 67.5-21t72.5-7q26 0 51 4t49 10v64q-24-9-48.5-13.5T700-380q-38 0-73 9t-67 27Zm0-110v-68q33-14 67.5-21t72.5-7q26 0 51 4t49 10v64q-24-9-48.5-13.5T700-490q-38 0-73 9.5T560-454ZM260-320q47 0 91.5 10.5T440-278v-394q-41-24-87-36t-93-12q-36 0-71.5 7T120-692v396q35-12 69.5-18t70.5-6Zm260 42q44-21 88.5-31.5T700-320q36 0 70.5 6t69.5 18v-396q-33-14-68.5-21t-71.5-7q-47 0-93 12t-87 36v394Zm-40 118q-48-38-104-59t-116-21q-42 0-82.5 11T100-198q-21 11-40.5-1T40-234v-482q0-11 5.5-21T62-752q46-24 96-36t102-12q58 0 113.5 15T480-740q51-30 106.5-45T700-800q52 0 102 12t96 36q11 5 16.5 15t5.5 21v482q0 23-19.5 35t-40.5 1q-37-20-77.5-31T700-240q-60 0-116 21t-104 59ZM280-494Z" /></svg>
                        <span>USER LIST</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M400-400h160v-80H400v80Zm0-120h320v-80H400v80Zm0-120h320v-80H400v80Zm-80 400q-33 0-56.5-23.5T240-320v-480q0-33 23.5-56.5T320-880h480q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H320Zm0-80h480v-480H320v480ZM160-80q-33 0-56.5-23.5T80-160v-560h80v560h560v80H160Zm160-720v480-480Z" /></svg>
                        <span>AUDIT LOG</span>
                    </a>
                </li>
                <li>
                    <button onclick="toggleSub()" class="dropdown-btn ddClick">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M80-200v-80h400v80H80Zm0-200v-80h200v80H80Zm0-200v-80h200v80H80Zm744 400L670-354q-24 17-52.5 25.5T560-320q-83 0-141.5-58.5T360-520q0-83 58.5-141.5T560-720q83 0 141.5 58.5T760-520q0 29-8.5 57.5T726-410l154 154-56 56ZM560-400q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Z" /></svg>
                        <span>ACCOUNT</span>
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M480-344 240-584l56-56 184 184 184-184 56 56-240 240Z" class="ddIcon" /></svg>
                    </button>
                    <ul class="sub-menu">
                        <li class="col-12">
                            <a href="#">
                                <span>VIEW PROFILE</span>
                            </a>
                        </li>
                        <li class="col-12">
                            <span>@Html.ActionLink("EDIT USER", "Edit", "Users", new { area = "" }, new { @id = @Session["UserId"] })</span>
                        </li>
                        <li class="col-12">
                            <span>@Html.ActionLink("LOGOUT", "Logout", "Users", new { area = "" })</span>
                        </li>
                    </ul>
                </li>

            </ul>
            <div class="d-flex flex-column">

            </div>
        </nav>


    }

<div>
    @if (Session["UserId"] == null)
    {
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-dark py-3" style="background-color: green">
            <div class="container ms-2 col-md-11">
                <a href="@Url.Action("Index", "Home")" title="Icon" class="col-sm-1 d-flex">
                    <img alt="Icon" src="@Url.Content("~/Resources/imgLaptop.png")" class="img-fluid m-auto" style="height: 30px;" />
                </a>
                @Html.ActionLink("CRUD APP", "Index", "Home", new { area = "" }, new { @class = "navbar-brand font-monospace fw-bold" })
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" title="Toggle navigation" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse d-sm-inline-flex justify-content-end col-12 d-flex" style="padding-right: 5px;">
                    <ul class="navbar-nav">
                        @if (Session["UserId"] == null)
                        {
                            <li>@Html.ActionLink("Login", "Login", "Users", new { area = "" }, new { @class = "nav-link mx-3" })</li>
                            <li style="margin-right: 80px">@Html.ActionLink("Register", "Create", "Users", new { area = "" }, new { @class = "nav-link mx-3" })</li>
                        }
                    </ul>
                </div>
            </div>
        </nav>
    }

    @if (Session["UserId"] != null)
    {
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-dark d-flex py-3" style="background-color: green">
            <div class="container ms-2 col-md-11">
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" title="Toggle navigation" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse d-sm-inline-flex justify-content-end col-12 d-flex">
                    <ul class="navbar-nav">
                        @if (Session["UserId"] != null)
                        {
                            <li class="my-auto mx-2 text-light">Welcome, <b>@Session["Username"].ToString()</b>!</li>
                            <li class="my-auto mx-2 nav-link">|</li>
                            <li>@Html.ActionLink("Logout", "Logout", "Users", new { area = "" }, new { @class = "nav-link mx-1" })</li>
                        }
                    </ul>
                </div>
            </div>
        </nav>
    }
    @RenderBody()
    <hr />
    <footer class="d-flex flex-row px-4 mx-4">
        <p>&copy; @DateTime.Now.Year - CRUD APP</p>
    </footer>
</div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @Styles.Render("~/Content/fontawesome")

    @RenderSection("scripts", required: false)

    <script>
        const subMenu = document.querySelector('.sub-menu');
        const toggleBtn = document.querySelector('#toggle-btn')
        const sideBar = document.querySelector('#sidebar')
        let shown = false;
        const ddIcon = document.querySelector('.ddIcon');

        if (shown == false) {
            window.onload = function () {
                subMenu.setAttribute("class", "disappear");
            }
        }

        function toggleSub() {
            if (shown == true) {
                subMenu.setAttribute("class", "disappear");
                ddIcon.setAttribute("class", ".revert")
                shown = false;
                console.log(shown);
            } else {
                subMenu.setAttribute("class", "sub-menu");
                shown = true;
                ddIcon.setAttribute("class", ".rotate")
                console.log(shown);
            }
        }

        function toogleSideBar() {
            sideBar.setAttribute("class", "close")
        }

        //Responsive viewHeight

        let vh = window.innerHeight;
        document.documentElement.style.setProperty('--vh', `${vh}px`);

        window.addEventListener('resize', () => {
            // We execute the same script as before
            let vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        });

    </script>

</body>
</html>